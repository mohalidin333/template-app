# Complete Next.js SEO Setup - All Files

## 📁 Project Structure
```
your-nextjs-project/
├── public/
│   ├── robots.txt
│   └── sitemap.xml
├── src/
│   ├── components/
│   │   ├── SEO/
│   │   │   ├── MetaTags.js
│   │   │   ├── JsonLd.js
│   │   │   └── OpenGraph.js
│   │   └── Layout/
│   │       └── Layout.js
│   ├── lib/
│   │   ├── seo.js
│   │   └── metadata.js
│   ├── app/ (App Router)
│   │   ├── layout.js
│   │   ├── page.js
│   │   └── globals.css
│   └── pages/ (Pages Router - alternative)
│       ├── _app.js
│       ├── _document.js
│       └── index.js
├── next.config.js
├── next-sitemap.config.js
└── package.json
```

## 🚀 Installation Commands

```bash
npm install next-sitemap next-seo
```

## 📄 Configuration Files

### 1. `package.json` (Scripts Section)
```json
{
  "scripts": {
    "build": "next build",
    "postbuild": "next-sitemap",
    "dev": "next dev",
    "start": "next start"
  }
}
```

### 2. `next.config.js`
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    appDir: true, // If using App Router
  },
  images: {
    domains: ['your-domain.com'], // Add your image domains
    formats: ['image/webp', 'image/avif'],
  },
  compress: true,
  poweredByHeader: false,
  generateEtags: false,
  swcMinify: true,
}

module.exports = nextConfig
```

### 3. `next-sitemap.config.js`
```javascript
/** @type {import('next-sitemap').IConfig} */
module.exports = {
  siteUrl: process.env.SITE_URL || 'https://your-domain.com',
  generateRobotsTxt: true,
  exclude: [
    '/admin/*',
    '/api/*',
    '/dashboard/*',
    '/private/*',
    '/temp/*',
    '/staging/*',
    '/*.json',
    '/sitemap*.xml',
  ],
  robotsTxtOptions: {
    policies: [
      {
        userAgent: '*',
        allow: '/',
        disallow: [
          '/admin/',
          '/api/',
          '/dashboard/',
          '/private/',
          '/temp/',
          '/staging/',
          '/*.json$',
          '/sitemap*.xml',
        ],
      },
      // Specific bot configurations
      {
        userAgent: 'Googlebot',
        allow: '/',
        disallow: ['/admin/', '/api/', '/private/'],
        crawlDelay: 1,
      },
      {
        userAgent: 'Bingbot',
        allow: '/',
        disallow: ['/admin/', '/api/', '/private/'],
        crawlDelay: 1,
      },
      // Block AI bots (optional)
      {
        userAgent: 'GPTBot',
        disallow: '/',
      },
      {
        userAgent: 'ChatGPT-User',
        disallow: '/',
      },
    ],
    additionalSitemaps: [
      'https://your-domain.com/sitemap.xml',
      'https://your-domain.com/sitemap-products.xml',
      'https://your-domain.com/sitemap-blog.xml',
    ],
  },
  changefreq: 'daily',
  priority: 0.7,
  sitemapSize: 5000,
  generateIndexSitemap: false,
}
```

### 4. `public/robots.txt`
```
User-agent: *
Allow: /
Disallow: /admin/
Disallow: /api/
Disallow: /dashboard/
Disallow: /private/

# Block AI bots (optional)
User-agent: GPTBot
Disallow: /

User-agent: ChatGPT-User
Disallow: /

Sitemap: https://your-domain.com/sitemap.xml
```

## 🔧 Core SEO Library Files

### 5. `src/lib/seo.js`
```javascript
// SEO utility functions and constants
export const SEO_CONFIG = {
  siteName: 'Your Site Name',
  siteUrl: process.env.NEXT_PUBLIC_SITE_URL || 'https://your-domain.com',
  defaultTitle: 'Your Default Title',
  defaultDescription: 'Your default description for SEO',
  defaultImage: '/images/og-default.jpg',
  twitterHandle: '@yourtwitterhandle',
  lang: 'en',
  // Enhanced configurations
  defaultKeywords: ['your', 'main', 'keywords', 'business', 'service'],
  locale: 'en_US',
  themeColor: '#000000',
  author: 'Your Name',
  publisher: 'Your Company Name',
  
  // Enhanced robots configuration
  robots: {
    default: {
      index: true,
      follow: true,
      noarchive: false,
      nosnippet: false,
      noimageindex: false,
      nocache: false,
    },
    googleBot: {
      index: true,
      follow: true,
      'max-video-preview': -1,
      'max-image-preview': 'large',
      'max-snippet': -1,
      noarchive: false,
      nosnippet: false,
      noimageindex: false,
      nocache: false,
    },
  },
}

export const generateMetadata = ({
  title,
  description,
  image,
  url,
  type = 'website',
  publishedTime,
  modifiedTime,
  keywords,
  robots,
}) => {
  const metaTitle = title ? `${title} | ${SEO_CONFIG.siteName}` : SEO_CONFIG.defaultTitle
  const metaDescription = description || SEO_CONFIG.defaultDescription
  const metaImage = image || SEO_CONFIG.defaultImage
  const metaUrl = url || SEO_CONFIG.siteUrl
  const metaKeywords = keywords || SEO_CONFIG.defaultKeywords

  // Use custom robots or default from config
  const robotsConfig = robots || SEO_CONFIG.robots.default

  return {
    title: metaTitle,
    description: metaDescription,
    keywords: metaKeywords,
    authors: [{ name: SEO_CONFIG.author }],
    creator: SEO_CONFIG.author,
    publisher: SEO_CONFIG.publisher,
    themeColor: SEO_CONFIG.themeColor,
    openGraph: {
      title: metaTitle,
      description: metaDescription,
      url: metaUrl,
      siteName: SEO_CONFIG.siteName,
      images: [
        {
          url: metaImage,
          width: 1200,
          height: 630,
          alt: metaTitle,
        },
      ],
      locale: SEO_CONFIG.locale,
      type,
      ...(publishedTime && { publishedTime }),
      ...(modifiedTime && { modifiedTime }),
    },
    twitter: {
      card: 'summary_large_image',
      title: metaTitle,
      description: metaDescription,
      images: [metaImage],
      creator: SEO_CONFIG.twitterHandle,
    },
    robots: {
      ...robotsConfig,
      googleBot: {
        ...SEO_CONFIG.robots.googleBot,
        ...(robots?.googleBot || {}),
      },
    },
  }
}

export const generateJsonLd = (data) => {
  const baseData = {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    name: SEO_CONFIG.siteName,
    url: SEO_CONFIG.siteUrl,
    logo: `${SEO_CONFIG.siteUrl}/images/logo.png`,
    ...data,
  }

  return JSON.stringify(baseData)
}

// Helper functions for different robots scenarios
export const ROBOTS_PRESETS = {
  // Default: Index and follow
  default: {
    index: true,
    follow: true,
  },
  
  // No index (e.g., admin pages, drafts)
  noindex: {
    index: false,
    follow: true,
  },
  
  // No follow (e.g., external links page)
  nofollow: {
    index: true,
    follow: false,
  },
  
  // Private pages (e.g., user profiles, private content)
  private: {
    index: false,
    follow: false,
    noarchive: true,
    nosnippet: true,
  },
  
  // Temporary pages (e.g., maintenance, events)
  temporary: {
    index: false,
    follow: true,
    noarchive: true,
    nocache: true,
  },
  
  // Archive pages (allow indexing but limit snippets)
  archive: {
    index: true,
    follow: true,
    'max-snippet': 100,
  },
}
```

### 6. `src/lib/metadata.js`
```javascript
import { SEO_CONFIG, generateMetadata } from './seo'

// Page-specific metadata configurations
export const homePageMetadata = generateMetadata({
  title: 'Home',
  description: 'Welcome to our website - your one-stop solution for...',
  url: SEO_CONFIG.siteUrl,
  keywords: ['home', 'main', 'welcome', ...SEO_CONFIG.defaultKeywords],
})

export const aboutPageMetadata = generateMetadata({
  title: 'About Us',
  description: 'Learn more about our company, mission, and values.',
  url: `${SEO_CONFIG.siteUrl}/about`,
  keywords: ['about', 'company', 'mission', 'values', ...SEO_CONFIG.defaultKeywords],
})

export const blogPageMetadata = generateMetadata({
  title: 'Blog',
  description: 'Read our latest articles and insights.',
  url: `${SEO_CONFIG.siteUrl}/blog`,
  keywords: ['blog', 'articles', 'insights', 'news', ...SEO_CONFIG.defaultKeywords],
})

export const generateBlogPostMetadata = (post) => {
  return generateMetadata({
    title: post.title,
    description: post.excerpt,
    image: post.featuredImage,
    url: `${SEO_CONFIG.siteUrl}/blog/${post.slug}`,
    type: 'article',
    publishedTime: post.publishedAt,
    modifiedTime: post.updatedAt,
    keywords: [...(post.tags || []), ...SEO_CONFIG.defaultKeywords],
  })
}

export const generateProductMetadata = (product) => {
  return generateMetadata({
    title: product.name,
    description: product.description,
    image: product.images?.[0],
    url: `${SEO_CONFIG.siteUrl}/products/${product.slug}`,
    type: 'product',
    keywords: [...(product.categories || []), 'product', ...SEO_CONFIG.defaultKeywords],
  })
}
```

## 🎨 SEO Component Files

### 7. `src/components/SEO/MetaTags.js`
```javascript
import Head from 'next/head'
import { SEO_CONFIG } from '@/lib/seo'

export default function MetaTags({
  title,
  description,
  image,
  url,
  type = 'website',
  publishedTime,
  modifiedTime,
  keywords,
  robots,
}) {
  const metaTitle = title ? `${title} | ${SEO_CONFIG.siteName}` : SEO_CONFIG.siteName
  const metaDescription = description || SEO_CONFIG.defaultDescription
  const metaImage = image || SEO_CONFIG.defaultImage
  const metaUrl = url || SEO_CONFIG.siteUrl
  const metaKeywords = keywords || SEO_CONFIG.defaultKeywords
  
  // Build robots content string
  const robotsConfig = robots || SEO_CONFIG.robots.default
  const robotsContent = Object.entries(robotsConfig)
    .map(([key, value]) => {
      if (typeof value === 'boolean') {
        return value ? key : `no${key}`
      }
      return `${key}:${value}`
    })
    .join(', ')

  return (
    <Head>
      <title>{metaTitle}</title>
      <meta name="description" content={metaDescription} />
      <meta name="keywords" content={metaKeywords.join(', ')} />
      <meta name="author" content={SEO_CONFIG.author} />
      <meta name="publisher" content={SEO_CONFIG.publisher} />
      <meta name="theme-color" content={SEO_CONFIG.themeColor} />
      <meta name="color-scheme" content="light dark" />
      <meta name="application-name" content={SEO_CONFIG.siteName} />
      <meta name="apple-mobile-web-app-title" content={SEO_CONFIG.siteName} />
      <meta name="msapplication-TileColor" content={SEO_CONFIG.themeColor} />
      
      <meta name="robots" content={robotsContent} />
      <meta name="googlebot" content={robotsContent} />
      <link rel="canonical" href={metaUrl} />
      
      {/* Open Graph */}
      <meta property="og:title" content={metaTitle} />
      <meta property="og:description" content={metaDescription} />
      <meta property="og:image" content={metaImage} />
      <meta property="og:url" content={metaUrl} />
      <meta property="og:type" content={type} />
      <meta property="og:site_name" content={SEO_CONFIG.siteName} />
      <meta property="og:locale" content={SEO_CONFIG.locale} />
      {publishedTime && <meta property="article:published_time" content={publishedTime} />}
      {modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}
      
      {/* Twitter */}
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content={metaTitle} />
      <meta name="twitter:description" content={metaDescription} />
      <meta name="twitter:image" content={metaImage} />
      <meta name="twitter:creator" content={SEO_CONFIG.twitterHandle} />
      
      {/* Additional meta tags */}
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <meta httpEquiv="Content-Type" content="text/html; charset=utf-8" />
      <meta name="language" content="English" />
    </Head>
  )
}
```

### 8. `src/components/SEO/JsonLd.js`
```javascript
import Head from 'next/head'

export default function JsonLd({ data }) {
  return (
    <Head>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{
          __html: JSON.stringify(data),
        }}
      />
    </Head>
  )
}
```

### 9. `src/components/SEO/OpenGraph.js`
```javascript
import Head from 'next/head'

export default function OpenGraph({ 
  title, 
  description, 
  image, 
  url, 
  type = 'website' 
}) {
  return (
    <Head>
      <meta property="og:title" content={title} />
      <meta property="og:description" content={description} />
      <meta property="og:image" content={image} />
      <meta property="og:url" content={url} />
      <meta property="og:type" content={type} />
      <meta property="og:site_name" content="Your Site Name" />
      
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content={title} />
      <meta name="twitter:description" content={description} />
      <meta name="twitter:image" content={image} />
    </Head>
  )
}
```

## 📱 App Router Implementation (Next.js 13+)

### 10. `src/app/layout.js`
```javascript
import { SEO_CONFIG } from '@/lib/seo'
import './globals.css'

export const metadata = {
  title: {
    template: `%s | ${SEO_CONFIG.siteName}`,
    default: SEO_CONFIG.defaultTitle,
  },
  description: SEO_CONFIG.defaultDescription,
  keywords: SEO_CONFIG.defaultKeywords,
  authors: [{ name: SEO_CONFIG.author }],
  creator: SEO_CONFIG.author,
  publisher: SEO_CONFIG.publisher,
  themeColor: SEO_CONFIG.themeColor,
  formatDetection: {
    email: false,
    address: false,
    telephone: false,
  },
  openGraph: {
    title: SEO_CONFIG.defaultTitle,
    description: SEO_CONFIG.defaultDescription,
    url: SEO_CONFIG.siteUrl,
    siteName: SEO_CONFIG.siteName,
    images: [
      {
        url: SEO_CONFIG.defaultImage,
        width: 1200,
        height: 630,
      },
    ],
    locale: SEO_CONFIG.locale,
    type: 'website',
  },
  twitter: {
    card: 'summary_large_image',
    title: SEO_CONFIG.defaultTitle,
    description: SEO_CONFIG.defaultDescription,
    images: [SEO_CONFIG.defaultImage],
    creator: SEO_CONFIG.twitterHandle,
  },
  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      'max-video-preview': -1,
      'max-image-preview': 'large',
      'max-snippet': -1,
    },
  },
}

export default function RootLayout({ children }) {
  return (
    <html lang={SEO_CONFIG.lang}>
      <head>
        <meta name="theme-color" content={SEO_CONFIG.themeColor} />
        <meta name="color-scheme" content="light dark" />
        <meta name="application-name" content={SEO_CONFIG.siteName} />
        <meta name="apple-mobile-web-app-title" content={SEO_CONFIG.siteName} />
        <meta name="msapplication-TileColor" content={SEO_CONFIG.themeColor} />
      </head>
      <body>
        {children}
      </body>
    </html>
  )
}
```

### 11. `src/app/page.js`
```javascript
import { homePageMetadata } from '@/lib/metadata'

export const metadata = homePageMetadata

export default function Home() {
  return (
    <main>
      <h1>Welcome to Our Website</h1>
      <p>Your content here...</p>
    </main>
  )
}
```

## 📄 Pages Router Implementation (Alternative)

### 12. `src/pages/_app.js`
```javascript
import { DefaultSeo } from 'next-seo'
import { SEO_CONFIG } from '@/lib/seo'

const defaultSEOConfig = {
  titleTemplate: `%s | ${SEO_CONFIG.siteName}`,
  defaultTitle: SEO_CONFIG.defaultTitle,
  description: SEO_CONFIG.defaultDescription,
  canonical: SEO_CONFIG.siteUrl,
  openGraph: {
    type: 'website',
    locale: SEO_CONFIG.locale,
    url: SEO_CONFIG.siteUrl,
    siteName: SEO_CONFIG.siteName,
    images: [
      {
        url: SEO_CONFIG.defaultImage,
        width: 1200,
        height: 630,
        alt: SEO_CONFIG.siteName,
      },
    ],
  },
  twitter: {
    handle: SEO_CONFIG.twitterHandle,
    site: SEO_CONFIG.twitterHandle,
    cardType: 'summary_large_image',
  },
}

export default function App({ Component, pageProps }) {
  return (
    <>
      <DefaultSeo {...defaultSEOConfig} />
      <Component {...pageProps} />
    </>
  )
}
```

### 13. `src/pages/_document.js`
```javascript
import { Html, Head, Main, NextScript } from 'next/document'

export default function Document() {
  return (
    <Html lang="en">
      <Head>
        <meta name="robots" content="index, follow" />
        <meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1" />
      </Head>
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  )
}
```

## 🎯 Usage Examples

### Blog Post Page (App Router)
```javascript
// app/blog/[slug]/page.js
import { generateBlogPostMetadata } from '@/lib/metadata'
import { getBlogPost } from '@/lib/blog'

export async function generateMetadata({ params }) {
  const post = await getBlogPost(params.slug)
  return generateBlogPostMetadata(post)
}

export default async function BlogPost({ params }) {
  const post = await getBlogPost(params.slug)
  
  return (
    <article>
      <h1>{post.title}</h1>
      <div dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  )
}
```

### Admin Page with Custom Robots (App Router)
```javascript
// app/admin/page.js
import { generateMetadata } from '@/lib/seo'
import { ROBOTS_PRESETS } from '@/lib/seo'

export const metadata = generateMetadata({
  title: 'Admin Dashboard',
  description: 'Admin dashboard for managing the website',
  robots: ROBOTS_PRESETS.private, // No index, no follow
})

export default function AdminPage() {
  return <div>Admin Dashboard</div>
}
```

### Product Page with Schema (Pages Router)
```javascript
// pages/products/[id].js
import { NextSeo } from 'next-seo'
import JsonLd from '@/components/SEO/JsonLd'

export default function ProductPage({ product }) {
  const productSchema = {
    '@context': 'https://schema.org',
    '@type': 'Product',
    name: product.name,
    description: product.description,
    image: product.images,
    offers: {
      '@type': 'Offer',
      price: product.price,
      priceCurrency: 'USD',
      availability: 'https://schema.org/InStock',
    },
  }

  return (
    <>
      <NextSeo
        title={product.name}
        description={product.description}
        canonical={`https://your-domain.com/products/${product.id}`}
        openGraph={{
          title: product.name,
          description: product.description,
          images: product.images.map(img => ({ url: img })),
        }}
      />
      <JsonLd data={productSchema} />
      
      <div>
        <h1>{product.name}</h1>
        <p>{product.description}</p>
        <p>${product.price}</p>
      </div>
    </>
  )
}
```

## 🚀 Build and Deploy

1. **Build**: `npm run build`
2. **Auto-generate sitemap**: Runs automatically via `postbuild` script
3. **Deploy**: `npm run start` or deploy to your hosting platform

## ✅ Best Practices Checklist

- [ ] Update all `your-domain.com` references to your actual domain
- [ ] Add your actual social media handles
- [ ] Create proper Open Graph images (1200x630px)
- [ ] Test with Google's Rich Results Test
- [ ] Verify in Google Search Console
- [ ] Check mobile-friendliness
- [ ] Monitor Core Web Vitals
- [ ] Regularly update sitemap
- [ ] Use descriptive, SEO-friendly URLs
- [ ] Optimize images with Next.js Image component

## 🔧 Environment Variables

Create a `.env.local` file:
```
NEXT_PUBLIC_SITE_URL=https://your-domain.com
SITE_URL=https://your-domain.com
```

This setup provides comprehensive SEO coverage for Next.js applications with proper file organization, enhanced robots configuration, and reusable components that scale with your project!